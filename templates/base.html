<!DOCTYPE html>
<html>
  <head>
    <!-- Required Meta Tags -->
    <meta charset="utf-8"/>
    <!-- Ensures proper rendering and touch-zooming for all devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/bootstrap.min.css') }}"/>

    <!-- Favicon -->
    <!-- <link rel="shortcut icon" href="{{ url_for('static', filename='img/favicon.ico') }}" type="image/x-icon"/> -->

    <!-- Javascript -->
    <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
    <script language="JavaScript"  src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>

    <!-- Change the title of the page depending on what's being displayed -->
    <title>
      {% block c_title %}
      Placeholder title
      {% endblock %}
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/base.css') }}"/>
    
    {% block links_or_scripts %}
    {% endblock %}
  </head>

  <body>

    <!-- Navbar - Consistent across all pages-->
    <nav class="navbar navbar-expand-lg navbar-light">
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
	  <a class="navbar-brand" href="/">
	    <img src="{{ url_for('static', filename='img/sector_transparent.png') }}" width="75" height="40" class="d-inline-block align-top" alt="">
	  </a>
          <li class="nav-item">
            <a class="nav-link" href="{{ url_for('root') }}">Home</a>
          </li>
	  <li class="nav-item">
            <a class="nav-link" href="{{ url_for('about') }}">About</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{{ url_for('visualization') }}">Visualization</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="{{ url_for('quiz') }}">Quiz</a>
            </li>
        </ul>

	<!-- Commented for demo purposes. Also unsure if we want the snippets idea -->
	<!-- button help https://getbootstrap.com/docs/4.0/components/buttons/ -->
        <form class="form-inline my-2 my-lg-0" method="POST" action="/s">
	<!--<form class="form-inline my-2 my-lg-0">-->
          <input class="form-control mr-sm-2" id="choice" type="search" placeholder="Search" aria-label="Search" name="searchtext">
          <button class="btn btn-outline-info my-2 my-sm-0" id="search_button" type="submit">Search</button>
        </form>
      </div>
    </nav>

    <script>
      $("button").click(function(e) {
      //e.preventDefault();
      
      var res = document.getElementById("choice").value;
      console.log(res);

      var results = [];
      
      d3.csv("../../static/data/WorldPopulation.csv", function(d) {
      var country = d["answer"];
      var code = d["Country Code"];
      
      //check if contained
      var resl = res.toLowerCase();
      var countryl = country.toLowerCase();
      var codel = country.toLowerCase();
      
      if(countryl.includes(resl) || codel.includes(resl)){
      var temp = [country, code, d["value"]];
      results.push(temp);
      //console.log(country);
      //console.log(code);
      }
      
      return d;
      }, function(error, data) {
      if (error) throw error;
      });
      
      //console.log(results);
      var alp = ["friendddsss", "hiiiiiiiiiiiiiii"];
      $.ajax({
      url: "{{ url_for('s') }}",
      data: {'queryy': document.getElementById("choice").value, 'data': alp},
      type: 'POST',
      success: function(response) {
      console.log('good');
      },
      error: function(error) {
      console.log('bad');
      }
      });
      
      });
    </script>
    <!-- Actual Page Related-->
    <div class="container">
      <div class="header">
        {% block header %}
        {% endblock %}
      </div>
      <div class="content">
        {% block content %}
        {% endblock %}
      </div>
    </div>

    <!-- Footer - Consistent across all pages-->
    <footer class="fixed-bottom">
      <p class="footer_text">
        Σector &copy;
	<span id="copyright">
          <script>document.getElementById('copyright').appendChild(document.createTextNode(new Date().getFullYear()))</script>
	</span>
	<!--<br />
            Produced by Σector: Kinshan Khan, Ryan Siu, James Smith, & Jake Zaia-->
      </p>
    </footer>

  </body>
</html>
