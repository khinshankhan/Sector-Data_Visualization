{% extends 'base.html' %}

{% block links_or_scripts %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/visualization.css') }}"/>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="{{ url_for('static', filename='js/d3-tip.js') }}"></script>
{% endblock %}

{% block c_title %}
Sector
{% endblock %}

{% block header %}
<h1> Can you guess <dummy id="dataset">{{dataset_name}}</dummy>? </h1>
{% endblock %}

{% block content %}
<div class="row">
  <div class="col-sm">
    <br>
    <h3>Time Remaining: <span id="time">{{ time }}</span></h3>
    <h3>Your Score: <span id="score">0</span></h3>
    <br>
    <label for="guess">Your Guess: </label>
    <input  id="guess" type="text" placeholder="Type your answer here">
    <br /> <br />

    <table id="answer_table">
      <tr>
        <th class="left"> Rank </th> <th class="right"> Datum </th> <th class="value"> Value </th>
      </tr>
      {% for i in range(dataset_size) %}
      <tr id="tr_rank_{{ i+1 }}">
        <td class="left"> {{i + 1}} </td> <td class="right"> </td> <td class="value"> </td>
      </tr>
      {% endfor %}
    </table>
  </div>
  <div class="col-sm">
    <br>
    <center><h3>{{ chart_name }}</h3></center>
    <svg width="500" height="500"></svg>
  </div>
</div>

<script src={{ url_for('static', filename='js/game.js') }}></script>

<script>
  d3.csv("../../static/data/{{ data_file | safe }}", function(d) {
    return d;
  }, function(error, data) {
    if (error) throw error;

    data.splice({{ dataset_size | safe }}, data.length);
    console.log(data);
    populateChart(data);
  });
</script>

{% endblock %}
